window.theme=window.theme||{},window.slate=window.slate||{},theme.Sections=function(){this.constructors={},this.instances=[],$(document).on("shopify:section:load",this._onSectionLoad.bind(this)).on("shopify:section:unload",this._onSectionUnload.bind(this)).on("shopify:section:select",this._onSelect.bind(this)).on("shopify:section:deselect",this._onDeselect.bind(this)).on("shopify:block:select",this._onBlockSelect.bind(this)).on("shopify:block:deselect",this._onBlockDeselect.bind(this))},theme.Sections.prototype=_.assignIn({},theme.Sections.prototype,{_createInstance:function(t,e){var i=$(t),s=i.attr("data-section-id"),o=i.attr("data-section-type");if(e=e||this.constructors[o],!_.isUndefined(e)){var n=_.assignIn(new e(t),{id:s,type:o,container:t});this.instances.push(n)}},_onSectionLoad:function(t){var e=$("[data-section-id]",t.target)[0];e&&this._createInstance(e)},_onSectionUnload:function(t){this.instances=_.filter(this.instances,function(e){var i=e.id===t.detail.sectionId;return i&&_.isFunction(e.onUnload)&&e.onUnload(t),!i})},_onSelect:function(t){var e=_.find(this.instances,function(e){return e.id===t.detail.sectionId});!_.isUndefined(e)&&_.isFunction(e.onSelect)&&e.onSelect(t)},_onDeselect:function(t){var e=_.find(this.instances,function(e){return e.id===t.detail.sectionId});!_.isUndefined(e)&&_.isFunction(e.onDeselect)&&e.onDeselect(t)},_onBlockSelect:function(t){var e=_.find(this.instances,function(e){return e.id===t.detail.sectionId});!_.isUndefined(e)&&_.isFunction(e.onBlockSelect)&&e.onBlockSelect(t)},_onBlockDeselect:function(t){var e=_.find(this.instances,function(e){return e.id===t.detail.sectionId});!_.isUndefined(e)&&_.isFunction(e.onBlockDeselect)&&e.onBlockDeselect(t)},register:function(t,e){this.constructors[t]=e,$("[data-section-type="+t+"]").each(function(t,i){this._createInstance(i,e)}.bind(this))}}),window.slate=window.slate||{},slate.rte={wrapTable:function(){$(".rte table").wrap('<div class="rte__table-wrapper"></div>')},iframeReset:function(){var t=$('.rte iframe[src*="youtube.com/embed"], .rte iframe[src*="player.vimeo"]'),e=t.add(".rte iframe#admin_bar_iframe");t.each(function(){$(this).wrap('<div class="video-wrapper"></div>')}),e.each(function(){this.src=this.src})}},window.slate=window.slate||{},slate.a11y={pageLinkFocus:function(t){var e="js-focus-hidden";t.first().attr("tabIndex","-1").focus().addClass(e).one("blur",function(){t.first().removeClass(e).removeAttr("tabindex")})},focusHash:function(){var t=window.location.hash;t&&document.getElementById(t.slice(1))&&this.pageLinkFocus($(t))},bindInPageLinks:function(){$("a[href*=#]").on("click",function(t){this.pageLinkFocus($(t.currentTarget.hash))}.bind(this))},trapFocus:function(t){var e=t.namespace?"focusin."+t.namespace:"focusin";t.$elementToFocus||(t.$elementToFocus=t.$container),t.$container.attr("tabindex","-1"),t.$elementToFocus.focus(),$(document).on(e,function(e){t.$container[0]===e.target||t.$container.has(e.target).length||t.$container.focus()})},removeTrapFocus:function(t){var e=t.namespace?"focusin."+t.namespace:"focusin";t.$container&&t.$container.length&&t.$container.removeAttr("tabindex"),$(document).off(e)}},theme.Currency=function(){var t="${{amount}}";return{formatMoney:function(e,i){function s(t,e,i,s){if(i=i||",",s=s||".",isNaN(t)||null==t)return 0;var o=(t=(t/100).toFixed(e)).split(".");return o[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+i)+(o[1]?s+o[1]:"")}"string"==typeof e&&(e=e.replace(".",""));var o="",n=/\{\{\s*(\w+)\s*\}\}/,a=i||t;switch(a.match(n)[1]){case"amount":o=s(e,2);break;case"amount_no_decimals":o=s(e,0);break;case"amount_with_comma_separator":o=s(e,2,".",",");break;case"amount_no_decimals_with_comma_separator":o=s(e,0,".",",");break;case"amount_no_decimals_with_space_separator":o=s(e,0," ")}return a.replace(n,o)}}}(),theme.Images=function(){return{preload:function(t,e){"string"==typeof t&&(t=[t]);for(var i=0;i<t.length;i++){var s=t[i];this.loadImage(this.getSizedImageUrl(s,e))}},loadImage:function(t){(new Image).src=t},switchImage:function(t,e,i){var s=this.imageSize(e.src),o=this.getSizedImageUrl(t.src,s);i?i(o,t,e):e.src=o},imageSize:function(t){var e=t.match(/.+_((?:pico|icon|thumb|small|compact|medium|large|grande)|\d{1,4}x\d{0,4}|x\d{1,4})[_\.@]/);return null===e?null:e[1]},getSizedImageUrl:function(t,e){if(null==e)return t;if("master"===e)return this.removeProtocol(t);var i=t.match(/\.(jpg|jpeg|gif|png|bmp|bitmap|tiff|tif)(\?v=\d+)?$/i);if(null!=i){var s=t.split(i[0]),o=i[0];return this.removeProtocol(s[0]+"_"+e+o)}return null},removeProtocol:function(t){return t.replace(/http(s)?:/,"")}}}(),slate.Variants=function(){function t(t){this.$container=t.$container,this.product=t.product,this.singleOptionSelector=t.singleOptionSelector,this.originalSelectorId=t.originalSelectorId,this.enableHistoryState=t.enableHistoryState,this.currentVariant=this._getVariantFromOptions(),$(this.singleOptionSelector,this.$container).on("change",this._onSelectChange.bind(this))}return t.prototype=_.assignIn({},t.prototype,{_getCurrentOptions:function(){var t=_.map($(this.singleOptionSelector,this.$container),function(t){var e=$(t),i=e.attr("type"),s={};return"radio"===i||"checkbox"===i?!!e[0].checked&&(s.value=e.val(),s.index=e.data("index"),s):(s.value=e.val(),s.index=e.data("index"),s)});return t=_.compact(t)},_getVariantFromOptions:function(){var t=this._getCurrentOptions(),e=this.product.variants;return _.find(e,function(e){return t.every(function(t){return _.isEqual(e[t.index],t.value)})})},_onSelectChange:function(){var t=this._getVariantFromOptions();this.$container.trigger({type:"variantChange",variant:t}),t&&(this._updateMasterSelect(t),this._updateImages(t),this._updatePrice(t),this._updateSKU(t),this.currentVariant=t,this.enableHistoryState&&this._updateHistoryState(t))},_updateImages:function(t){var e=t.featured_image||{},i=this.currentVariant.featured_image||{};t.featured_image&&e.src!==i.src&&this.$container.trigger({type:"variantImageChange",variant:t})},_updatePrice:function(t){t.price===this.currentVariant.price&&t.compare_at_price===this.currentVariant.compare_at_price||this.$container.trigger({type:"variantPriceChange",variant:t})},_updateSKU:function(t){t.sku!==this.currentVariant.sku&&this.$container.trigger({type:"variantSKUChange",variant:t})},_updateHistoryState:function(t){if(history.replaceState&&t){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+"?variant="+t.id;window.history.replaceState({path:e},"",e)}},_updateMasterSelect:function(t){$(this.originalSelectorId,this.$container).val(t.id)}}),t}(),window.Drawers=function(){var t=function(t,e,i){var s={close:".js-drawer-close",open:".js-drawer-open-"+e,openClass:"js-drawer-open",dirOpenClass:"js-drawer-open-"+e};if(this.$nodes={parent:$("body, html"),page:$(".page-element"),moved:$(".is-moved-by-drawer")},this.config=$.extend(s,i),this.position=e,this.$drawer=$("#"+t),this.$open=$(this.config.open),!this.$drawer.length)return!1;this.drawerIsOpen=!1,this.init()};return t.prototype.init=function(){this.$open.attr("aria-expanded","false"),this.$open.on("click",$.proxy(this.open,this)),this.$drawer.find(this.config.close).on("click",$.proxy(this.close,this))},t.prototype.open=function(t){var e=!1;if(!this.drawerIsOpen){if(this.$open.addClass(this.config.openClass),t?t.preventDefault():e=!0,t&&t.stopPropagation&&(t.stopPropagation(),this.$activeSource=$(t.currentTarget)),this.drawerIsOpen&&!e)return this.close();this.$nodes.moved.addClass("is-transitioning"),this.$drawer.prepareTransition(),this.$nodes.parent.addClass(this.config.openClass+" "+this.config.dirOpenClass),this.drawerIsOpen=!0,slate.a11y.trapFocus({$container:this.$drawer,namespace:"drawer_focus"}),this.config.onDrawerOpen&&"function"==typeof this.config.onDrawerOpen&&(e||this.config.onDrawerOpen()),this.$activeSource&&this.$activeSource.attr("aria-expanded")&&this.$activeSource.attr("aria-expanded","true"),this.bindEvents()}},t.prototype.close=function(){this.drawerIsOpen&&(this.$open.removeClass(this.config.openClass),$(document.activeElement).trigger("blur"),this.$nodes.moved.prepareTransition({disableExisting:!0}),this.$drawer.prepareTransition({disableExisting:!0}),this.$nodes.parent.removeClass(this.config.dirOpenClass+" "+this.config.openClass),this.drawerIsOpen=!1,slate.a11y.removeTrapFocus({$container:this.$drawer,namespace:"drawer_focus"}),this.$activeSource&&this.$activeSource.attr("aria-expanded")&&this.$activeSource.attr("aria-expanded","false"),this.unbindEvents())},t.prototype.bindEvents=function(){this.$nodes.page.on("touchmove.drawer",function(){return!1}),this.$nodes.page.on("click.drawer",$.proxy(function(){return this.close(),!1},this)),this.$nodes.parent.on("keyup.drawer",$.proxy(function(t){27===t.keyCode&&this.close()},this))},t.prototype.unbindEvents=function(){this.$nodes.page.off(".drawer"),this.$nodes.parent.off(".drawer")},t}(),theme.Hero=function(){function t(){this.namespace=".hero",this.$hero=$(e.hero),this.$hero.on("init"+this.namespace,this._a11y.bind(this)),this.$hero.on("init"+this.namespace,this._arrowsInit.bind(this)),this.$hero.slick({accessibility:!0,arrows:!1,draggable:!1,autoplay:this.$hero.data("autoplay"),autoplaySpeed:this.$hero.data("speed")}),$(e.heroImage).on("click"+this.namespace,function(){this.$hero.slick("slickNext")}.bind(this)),$(e.heroPause).on("click"+this.namespace,function(){$(e.heroPause).hasClass("is-paused")?this._play():this._pause()}.bind(this))}var e={hero:".hero",heroWrapper:".hero-wrapper",heroArrows:".hero__arrow",heroImage:".hero__image",heroPause:".hero__pause"};return t.prototype=_.assignIn({},t.prototype,{_pause:function(){this.$hero.slick("slickPause"),$(e.heroPause).addClass("is-paused")},_play:function(){this.$hero.slick("slickPlay"),$(e.heroPause).removeClass("is-paused")},_a11y:function(t,i){var s=i.$list;s.removeAttr("aria-live"),$(e.heroWrapper).on("focusin"+this.namespace,function(t){$(e.heroWrapper).has(t.target).length&&(s.attr("aria-live","polite"),this._pause())}.bind(this)),$(e.heroWrapper).on("focusout"+this.namespace,function(t){$(e.heroWrapper).has(t.target).length&&(s.removeAttr("aria-live"),this._play())}.bind(this))},_arrowsInit:function(t,i){var s=i.slideCount,o=i.$slider,n=$(e.heroArrows);n.length&&s>1?n.on("click"+this.namespace,function(t){t.preventDefault(),$(t.currentTarget).hasClass("hero__arrow--prev")?o.slick("slickPrev"):o.slick("slickNext"),this._scrollTop()}.bind(this)):n.remove()},_scrollTop:function(){var t=$(document).scrollTop(),e=this.$hero.offset().top;t>e&&$("html").add("body").animate({scrollTop:e},250)},goToSlide:function(t){this.$hero.slick("slickGoTo",t)},pause:function(){this.$hero.slick("slickPause")},play:function(){this.$hero.slick("slickPlay")},destroy:function(){this.$hero.off(this.namespace),$(e.heroImage).off(this.namespace),$(e.heroPause).off(this.namespace),$(e.heroWrapper).off(this.namespace),$(e.heroArrows).off(this.namespace),this.$hero.slick("unslick")}}),t}(),window.Modals=function(){var t=function(t,e,i){var s={close:".js-modal-close",open:".js-modal-open-"+e,openClass:"modal--is-active"};if(this.$modal=$("#"+t),!this.$modal.length)return!1;this.$nodes={body:$("body")},this.config=$.extend(s,i),this.modalIsOpen=!1,this.focusOnOpen=this.config.focusOnOpen?$(this.config.focusOnOpen):this.$modal,this.init()};return t.prototype.init=function(){$(this.config.open).attr("aria-expanded","false"),$(this.config.open).on("click",$.proxy(this.open,this)),this.$modal.find(this.config.close).on("click",$.proxy(this.close,this))},t.prototype.open=function(t){var e=!1;if(!this.modalIsOpen){if(t?t.preventDefault():e=!0,t&&t.stopPropagation&&(t.stopPropagation(),this.$activeSource=$(t.currentTarget)),this.modalIsOpen&&!e)return this.close();this.$modal.prepareTransition().addClass(this.config.openClass),this.$nodes.body.addClass(this.config.openClass),this.modalIsOpen=!0,slate.a11y.trapFocus({$container:this.$modal,namespace:"modal_focus",$elementToFocus:this.focusOnOpen}),this.$activeSource&&this.$activeSource.attr("aria-expanded")&&this.$activeSource.attr("aria-expanded","true"),this.bindEvents()}},t.prototype.close=function(){this.modalIsOpen&&($(document.activeElement).trigger("blur"),this.$modal.prepareTransition().removeClass(this.config.openClass),this.$nodes.body.removeClass(this.config.openClass),this.modalIsOpen=!1,slate.a11y.removeTrapFocus({$container:this.$modal,namespace:"modal_focus"}),this.$activeSource&&this.$activeSource.attr("aria-expanded")&&this.$activeSource.attr("aria-expanded","false").focus(),this.unbindEvents())},t.prototype.bindEvents=function(){this.$nodes.body.on("keyup.modal",$.proxy(function(t){27===t.keyCode&&this.close()},this))},t.prototype.unbindEvents=function(){this.$nodes.body.off(".modal")},t}(),window.Meganav=function(){var t=function(t){this.cache={$document:$(document),$page:$(".page-element")};var e={$meganavs:$(".meganav"),$meganavToggle:$(".meganav-toggle"),isOpen:!1,preventDuplicates:!1,closeOnPageClick:!1,activeClass:"meganav--active",noAnimationClass:"meganav--no-animation"};this.config=$.extend(e,t),this.init()};return t.prototype.init=function(){var t=this.config.$meganavToggle;t.attr("aria-expanded","false"),t.each(function(t,e){var i=$(e);i.attr("aria-controls",i.attr("data-aria-controls"))}),t.on("click",$.proxy(this.requestMeganav,this))},t.prototype.requestMeganav=function(t){t&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation();var e=$(t.currentTarget),i=$("#"+e.attr("aria-controls")),s=this.config.isOpen;if(e.hasClass(this.config.activeClass))return e.is("a")?void(window.location=e.attr("href")):this.close(t,e);this.config.preventDuplicates&&this.close(),e.addClass(this.config.activeClass).attr("aria-expanded","true"),this.open(i,s),this.bindEvents(),this.config.isOpen=!0},t.prototype.open=function(t,e){t.addClass(this.config.activeClass),e&&t.addClass(this.config.noAnimationClass)},t.prototype.close=function(t,e){this.config.preventDuplicates?(this.config.$meganavs.removeClass([this.config.activeClass,this.config.noAnimationClass].join(" ")),this.config.$meganavToggle.removeClass(this.config.activeClass).attr("aria-expanded","false")):($("#"+e.attr("aria-controls")).removeClass([this.config.activeClass,this.config.noAnimationClass].join(" ")),e.removeClass(this.config.activeClass).attr("aria-expanded","false")),this.unbindEvents(),this.config.isOpen=!1},t.prototype.bindEvents=function(){this.config.closeOnPageClick&&(this.cache.$page.on("click.meganav",$.proxy(this.close,this)),this.config.$meganavs.on("click.meganav",function(t){t.stopImmediatePropagation()}),this.cache.$document.on("keyup.meganav",$.proxy(function(t){27===t.keyCode&&(this.config.$meganavToggle.filter("."+this.config.activeClass).focus(),this.close())},this)))},t.prototype.unbindEvents=function(){this.config.closeOnPageClick&&(this.cache.$page.off(".meganav"),this.config.$meganavs.off(".meganav"),this.cache.$document.off(".meganav"))},t}(),window.QtySelector=function(){var t=function(t){this.cache={$body:$("body"),$subtotal:$("#CartSubtotal"),$discountTotal:$("#cartDiscountTotal"),$cartTable:$(".cart-table"),$cartTemplate:$("#CartProducts")},this.settings={loadingClass:"js-qty--is-loading",isCartTemplate:this.cache.$body.hasClass("template-cart"),minQty:this.cache.$body.hasClass("template-cart")?0:1},this.$el=t,this.qtyUpdateTimeout,this.createInputs(),this.bindEvents()};return t.prototype.createInputs=function(){var t=this.$el,e={value:t.val(),key:t.attr("id"),name:t.attr("name"),line:t.attr("data-line")},i=$("#QuantityTemplate").html(),s=Handlebars.compile(i);this.$wrapper=$(s(e)).insertBefore(t),t.remove()},t.prototype.validateAvailability=function(t,e){var i=theme.cartObject.items[t-1],s=i.handle,o=i.id,n={type:"GET",url:"/products/"+s+".js",dataType:"json",success:$.proxy(function(i){this.validateAvailabilityCallback(t,e,o,i)},this)};$.ajax(n)},t.prototype.validateAvailabilityCallback=function(t,e,i,s){for(var o=!0,n=0;n<s.variants.length;n++){var a=s.variants[n];if(a.id===i)break}null!==a.inventory_management&&"deny"===a.inventory_policy&&a.inventory_quantity<e&&(theme.Notify.open("error",theme.strings.noStockAvailable,!0),this.$wrapper.find(".js-qty__input").val(a.inventory_quantity),o=!1,this.$wrapper.removeClass(this.settings.loadingClass)),o&&this.updateItemQuantity(t,e)},t.prototype.validateQty=function(t){return(parseFloat(t)!==parseInt(t,10)||isNaN(t))&&(t=1),parseInt(t,10)},t.prototype.adjustQty=function(t){var e=$(t.currentTarget),i=e.siblings(".js-qty__input"),s=this.validateQty(i.val()),o=i.attr("data-line");e.hasClass("js-qty__adjust--minus")?(s-=1)<=this.settings.minQty&&(s=this.settings.minQty):s+=1,this.settings.isCartTemplate?(e.parent().addClass(this.settings.loadingClass),this.updateCartItemPrice(o,s)):i.val(s)},t.prototype.bindEvents=function(){this.$wrapper.find(".js-qty__adjust").on("click",$.proxy(this.adjustQty,this)),this.$wrapper.on("click",".js-qty__input",function(){this.setSelectionRange(0,this.value.length)}),this.settings.isCartTemplate&&this.$wrapper.on("change",".js-qty__input",$.proxy(function(t){var e=$(t.currentTarget),i=e.attr("data-line"),s=this.validateQty(e.val());e.parent().addClass(this.settings.loadingClass),this.updateCartItemPrice(i,s)},this))},t.prototype.updateCartItemPrice=function(t,e){clearTimeout(this.qtyUpdateTimeout),this.qtyUpdateTimeout=setTimeout($.proxy(function(){this.validateAvailability(t,e)},this),200)},t.prototype.updateItemQuantity=function(t,e){var i={type:"POST",url:"/cart/change.js",data:"quantity="+e+"&line="+t,dataType:"json",success:$.proxy(function(t){this.updateCartItemCallback(t)},this)};$.ajax(i)},t.prototype.updateCartItemCallback=function(e){if(0!==e.item_count){theme.cartObject=e;var i,s={},o=[],n={},a=$("#CartProductTemplate").html(),r=Handlebars.compile(a);$.each(e.items,function(t,e){i=null===e.image?"//cdn.shopify.com/s/assets/admin/no-image-medium-cc9732cb976dd349a0df1d39816fbcc7.gif":e.image.replace(/(\.[^.]*)$/,"_240x240$1").replace("http:",""),null!==e.properties&&$.each(e.properties,function(t,i){"_"!==t.charAt(0)&&i||delete e.properties[t]}),n={key:e.key,line:t+1,url:e.url,img:i,name:e.product_title,variation:e.variant_title,properties:e.properties,itemQty:e.quantity,price:theme.Currency.formatMoney(e.price,theme.moneyFormat),vendor:e.vendor,linePrice:theme.Currency.formatMoney(e.line_price,theme.moneyFormat),originalLinePrice:theme.Currency.formatMoney(e.original_line_price,theme.moneyFormat),discounts:e.discounts,discountsApplied:e.line_price!==e.original_line_price},o.push(n)}),s={items:o},this.cache.$cartTemplate.empty().append(r(s)),this.cache.$cartTable.find('input[type="number"]').each(function(e,i){new t($(i))}),this.cache.$subtotal.html(theme.Currency.formatMoney(e.total_price,theme.moneyFormat)),e.total_discount>0?this.cache.$discountTotal.html(theme.strings.totalCartDiscount.replace("[savings]",theme.Currency.formatMoney(e.total_discount,theme.moneyFormat))):this.cache.$discountTotal.empty(),slate.a11y.pageLinkFocus(this.cache.$cartTable)}else location.reload()},t}(),window.AjaxCart=function(){var t=function(t){this.cache={$cartIconIndicator:$(".site-header__cart-indicator")},this.$form=t,this.eventListeners()};return t.prototype.eventListeners=function(){this.$form.length&&this.$form.on("submit",$.proxy(this.addItemFromForm,this))},t.prototype.addItemFromForm=function(t){t.preventDefault();var e={type:"POST",url:"/cart/add.js",data:this.$form.serialize(),dataType:"json",success:$.proxy(function(t){this.success(t)},this),error:$.proxy(function(t,e){this.error(t,e)},this)};$.ajax(e)},t.prototype.success=function(){theme.Notify.open("success",!1,!0),this.cache.$cartIconIndicator.removeClass("hide")},t.prototype.error=function(t){var e=JSON.parse(t.responseText);e.message&&theme.Notify.open("error",e.description,!0)},t}(),window.Notify=function(){function t(){if(window.self!==window.top)return!1;try{var t=window.sessionStorage;return t.setItem("test","1"),t.removeItem("test"),!0}catch(t){return!1}}var e=function(){this.cache={$scrollParent:$("html").add("body"),$notificationSuccess:$("#NotificationSuccess"),$notificationSuccessLink:$("#NotificationSuccess").find("a"),$notificationError:$("#NotificationError"),$notificationPromo:$("#NotificationPromo"),$notificationClose:$(".notification__close"),$notificationErrorMessage:$(".notification__message--error")},this.settings={notifyActiveClass:"notification--active",closeTimer:5e3,promoKeyName:"promo-"+this.cache.$notificationPromo.data("text")},this.notifyTimer,this.$lastFocusedElement=null,this.isLocalStorageSupported=t(),this.cache.$notificationClose.on("click",this.close.bind(this)),this.showPromo()};return e.prototype.open=function(t,e,i){this.close(),"success"===t?(this.cache.$notificationSuccess.attr("aria-hidden",!1).addClass(this.settings.notifyActiveClass),this.$lastFocusedElement=$(document.activeElement),this.cache.$notificationSuccess.one("TransitionEnd webkitTransitionEnd transitionend oTransitionEnd",$.proxy(function(){slate.a11y.pageLinkFocus(this.cache.$notificationSuccessLink)},this)),this.cache.$scrollParent.hasClass("no-csstransitions")&&slate.a11y.pageLinkFocus(this.cache.$notificationSuccessLink)):(this.cache.$notificationErrorMessage.html(e),this.cache.$notificationError.attr("aria-hidden",!1).addClass(this.settings.notifyActiveClass)),i&&(clearTimeout(this.notifyTimer),this.notifyTimer=setTimeout(this.close.bind(this),this.settings.closeTimer))},e.prototype.close=function(t){t&&"NotificationPromoClose"===$(t.currentTarget).attr("id")&&this.isLocalStorageSupported&&localStorage.setItem(this.settings.promoKeyName,"hidden"),this.$lastFocusedElement&&this.cache.$notificationSuccessLink.is(":focus")&&slate.a11y.pageLinkFocus(this.$lastFocusedElement),this.cache.$notificationSuccess.attr("aria-hidden",!0).removeClass(this.settings.notifyActiveClass),this.cache.$notificationError.attr("aria-hidden",!0).removeClass(this.settings.notifyActiveClass),this.cache.$notificationPromo.attr("aria-hidden",!0).removeClass(this.settings.notifyActiveClass),this.$lastFocusedElement=null},e.prototype.showPromo=function(t){t&&this.initCache(),this.isLocalStorageSupported&&"hidden"===localStorage[this.settings.promoKeyName]||this.cache.$notificationPromo.attr("aria-hidden",!1).addClass(this.settings.notifyActiveClass)},e}(),theme.Maps=function(){function t(t){theme.$currentMapContainer=this.$container=$(t);var i=this.$container.data("api-key");if("string"==typeof i&&""!==i)if("loaded"===o){var s=this;0==$('script[src*="'+i+'&"]').length?$.getScript("https://maps.googleapis.com/maps/api/js?key="+i).then(function(){o="loaded",s.createMap()}):this.createMap()}else n.push(this),"loading"!==o&&(o="loading",void 0===window.google&&$.getScript("https://maps.googleapis.com/maps/api/js?key="+i).then(function(){o="loaded",e()}))}function e(){$.each(n,function(t,e){e.createMap()})}function i(t){var e=$.Deferred(),i=new google.maps.Geocoder,s=t.data("address-setting");return i.geocode({address:s},function(t,i){i!==google.maps.GeocoderStatus.OK&&e.reject(i),e.resolve(t)}),e}var s={zoom:14,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#cacaca"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#e1e1e1"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#e1e1e1"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#bbbbbb"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}]},o=null,n=[];return t.prototype=_.assignIn({},t.prototype,{createMap:function(){var t=this.$container.find(".map-section__container");return i(t).then(function(e){var i={zoom:s.zoom,styles:s.styles,center:e[0].geometry.location,draggable:!1,clickableIcons:!1,scrollwheel:!1,disableDoubleClickZoom:!0,disableDefaultUI:!0},o=this.map=new google.maps.Map(t[0],i),n=this.center=o.getCenter(),a=t.data("enable-pin"),r={path:"M57.7,0C25.8,0,0,25.8,0,57.7C0,89.5,50,170,57.7,170s57.7-80.5,57.7-112.3C115.3,25.8,89.5,0,57.7,0z M57.7,85 c-14.9,0-27-12.1-27-27c0-14.9,12.1-27,27-27c14.9,0,27,12.1,27,27C84.7,72.9,72.6,85,57.7,85z",fillColor:t.data("marker-color"),fillOpacity:.9,scale:.2,strokeWeight:0};new google.maps.Marker({map:o,position:n,icon:r,visible:a});google.maps.event.addDomListener(window,"resize",$.debounce(250,function(){google.maps.event.trigger(o,"resize"),o.setCenter(n)}))}.bind(this)).fail(function(){var e;switch(status){case"ZERO_RESULTS":e=theme.strings.addressNoResults;break;case"OVER_QUERY_LIMIT":e=theme.strings.addressQueryLimit;break;default:e=theme.strings.addressError}if(Shopify.designMode){var i=t.parents(".map-section");i.addClass("page-width map-section--load-error"),i.find(".map-section__content-wrapper").remove(),i.find(".map-section__wrapper").html('<div class="errors text-center" style="width: 100%;">'+e+"</div>")}})},onUnload:function(){void 0!==window.google&&google.maps.event.clearListeners(this.map,"resize")}}),t}(),theme.stickyHeader=function(){function t(){a={$window:$(window),$siteNavSearchCart:$(o.searchCartWrapper),$stickyBar:$(o.stickyBar)}}function e(){var t=a.$window.scrollTop(),e=$(o.stickyNavWrapper),r=e.offset().top+e.height()+10;t<n.lastScroll&&(r=e.offset().top),t>r?i():s(),n.lastScroll=t}function i(){n.isActive||(n.isActive=!0,a.$stickyBar.addClass(n.navClass),setTimeout(function(){a.$stickyBar.addClass(n.openTransitionClass)},0))}function s(){n.isActive&&(a.$stickyBar.removeClass(n.openTransitionClass).removeClass(n.navClass),n.isActive=!1)}var o={searchCartWrapper:"#SiteNavSearchCart",stickyNavSearchCart:"#StickyNavSearchCart",stickyNavWrapper:"#StickNavWrapper",stickyBar:"#StickyBar"},n={lastScroll:0,navClass:"sticky--active",openTransitionClass:"sticky--open",closeTransitionClass:"sticky--close"},a={};return{init:function(){t(),n.isActive=!1,a.$siteNavSearchCart.contents().length&&a.$siteNavSearchCart.contents().clone().appendTo($(o.stickyNavSearchCart)),a.$window.on("scroll.stickynav",$.throttle(15,e))},unload:function(){$(window).off(".stickynav")}}}(),theme.headerNav=function(){function t(){var t=0,e=$(s.siteNavParent).width();$(s.stickyNavWrapper).height($(s.stickyNav).height()),$(s.siteNav).removeClass("hide"),$(s.siteNavItem).each(function(e,i){t+=$(i).width()}),t>e?($(s.siteNav).addClass("hide"),$(s.siteNavCompressed).removeClass("hide")):($(s.siteNav).removeClass("hide"),$(s.siteNavCompressed).addClass("hide"))}function e(){new window.Meganav({$meganavs:$(".site-nav__dropdown"),$meganavToggle:$(".site-nav__meganav-toggle"),preventDuplicates:!0,closeOnPageClick:!0}),new window.Meganav({$meganavs:$(".meganav--index"),$meganavToggle:$(".index__meganav-toggle")}),new window.Meganav({$meganavs:$(".meganav--drawer"),$meganavToggle:$(".drawer__meganav-toggle")})}function i(){$(".site-header__search").each(function(t,e){var i=$(e),s=i.find("."+o.searchInputClass),n=i.find("."+o.searchSubmitClass);s.on("focus",function(){s.addClass(o.searchShowClass)}),s.on("blur",function(){s.val()?s.addClass(o.searchShowClass):s.removeClass(o.searchShowClass)}),n.on("click",function(t){s.hasClass(o.searchShowClass)||(t.preventDefault(),s.addClass(o.searchShowClass).focus())})})}var s={siteNav:"#SiteNav",siteNavCompressed:"#SiteNavCompressed",siteNavParent:"#SiteNavParent",siteNavItem:".site-nav__item",stickyNavWrapper:"#StickNavWrapper",stickyNav:"#StickyNav"},o={lastScroll:0,isActive:!1,navClass:"sticky--active",openTransitionClass:"sticky--open",closeTransitionClass:"sticky--close",searchShowClass:"site-header__search-input--visible",searchInputClass:"site-header__search-input",searchSubmitClass:"site-header__search-submit"};return{init:function(){t(),e(),i(),$(window).on("resize.headernav",$.debounce(250,t))},unload:function(){$(window).off(".stickynav")}}}(),theme.customerTemplates=function(){function t(){$("#RecoverPassword").on("click",function(t){t.preventDefault(),e()}),$("#HideRecoverPasswordLink").on("click",function(t){t.preventDefault(),e()})}function e(){$("#RecoverPasswordForm").toggleClass("hide"),$("#CustomerLoginForm").toggleClass("hide")}function i(){$(".reset-password-success").length&&$("#ResetSuccess").removeClass("hide")}function s(){var t=$("#AddressNewForm");t.length&&(Shopify&&new Shopify.CountryProvinceSelector("AddressCountryNew","AddressProvinceNew",{hideElement:"AddressProvinceContainerNew"}),$(".address-country-option").each(function(){var t=$(this).data("form-id"),e="AddressCountry_"+t,i="AddressProvince_"+t,s="AddressProvinceContainer_"+t;new Shopify.CountryProvinceSelector(e,i,{hideElement:s})}),$(".address-new-toggle").on("click",function(){t.toggleClass("hide")}),$(".address-edit-toggle").on("click",function(){var t=$(this).data("form-id");$("#EditAddress_"+t).toggleClass("hide")}),$(".address-delete").on("click",function(){var t=$(this),e=t.data("form-id"),i=t.data("confirm-message");confirm(i||"Are you sure you wish to delete this address?")&&Shopify.postLink("/account/addresses/"+e,{parameters:{_method:"delete"}})}))}function o(){"#recover"===window.location.hash&&e()}return{init:function(){o(),t(),i(),s()}}}(),theme.HeaderSection=function(){function t(){theme.stickyHeader.init(),theme.headerNav.init(),theme.Notify=new window.Notify,theme.NavDrawer=new window.Drawers("NavDrawer","left"),e()}function e(){var t=$(".drawer__search-input");$(".drawer__search-submit").on("click",function(e){0===t.val().length&&(e.preventDefault(),t.focus())})}return t.prototype=_.assignIn({},t.prototype,{onUnload:function(){theme.stickyHeader.unload(),theme.headerNav.unload()}}),t}(),theme.Filters=function(){function t(){this.$filterSelect=$(e.filterSelection),this.$sortSelect=$(e.sortSelection),this.default=this._getDefaultSortValue(),this.$sortSelect.val(this.default),this.$filterSelect.on("change",this._onFilterChange.bind(this)),this.$sortSelect.on("change",this._onSortChange.bind(this))}var e={filterSelection:"#SortTags",sortSelection:"#SortBy"};return t.prototype=_.assignIn({},t.prototype,{_getDefaultSortValue:function(){return Shopify.queryParams.sort_by?Shopify.queryParams.sort_by:this.$sortSelect.data("default-sort")},_onFilterChange:function(){delete Shopify.queryParams.page,$.isEmptyObject(Shopify.queryParams)?location.href=this.$filterSelect.val():location.href=this.$filterSelect.val()+"?"+$.param(Shopify.queryParams)},_onSortChange:function(){Shopify.queryParams.sort_by=this.$sortSelect.val(),location.search=$.param(Shopify.queryParams)},onUnload:function(){this.$filterSelect.off("change",this._onFilterChange),this.$sortSelect.off("change",this._onSortChange)}}),t}(),theme.Product=function(){function t(t){var i=this.$container=$(t),s=i.attr("data-section-id");this.selectors={originalSelectorId:"#ProductSelect-"+s,modal:"ProductModal",productZoomImage:"#ProductZoomImg",addToCart:"#AddToCart-"+s,productPrice:"#ProductPrice-"+s,comparePrice:"#ComparePrice-"+s,addToCartText:"#AddToCartText-"+s,SKU:".variant-sku",productFeaturedImage:"#ProductPhotoImg-"+s,productImageWrap:"#ProductPhotoLink-"+s,productThumbAllImages:".product-single__thumbnail",productThumbImages:".product-single__thumbnail-"+s,productThumbs:"#ProductThumbs-"+s,saleTag:"#ProductSaleTag-"+s,productStock:"#ProductStock-"+s,singleOptionSelector:".single-option-selector-"+s},this.settings=$.extend({},e,{sectionId:s,ajaxCart:i.data("ajax"),stockSetting:i.data("stock"),enableHistoryState:i.data("enable-history-state")||!1,namespace:".product-"+s,imageSize:theme.Images.imageSize($(this.selectors.productFeaturedImage).attr("src"))}),$("#ProductJson-"+s).html()&&(this.productSingleObject=JSON.parse($("#ProductJson-"+s).html()),this.addVariantInfo(),this.init())}var e={smallBreakpoint:750,productThumbIndex:0,productThumbMax:0,ajaxCart:!1,stockSetting:!1};return t.prototype=_.assignIn({},t.prototype,{init:function(){this._stringOverrides(),this._initVariants(),this._productZoomImage(),this._productThumbSwitch(),this._productThumbnailSlider(),this._initQtySelector(),this.settings.ajaxCart&&(theme.AjaxCart=new window.AjaxCart($("#AddToCartForm"))),theme.Images.preload(this.productSingleObject.images,this.settings.imageSize)},_stringOverrides:function(){window.productStrings=window.productStrings||{},$.extend(theme.strings,window.productStrings)},addVariantInfo:function(){if(this.productSingleObject&&this.settings.stockSetting)for(var t=JSON.parse($("#VariantJson-"+this.settings.sectionId).html()),e=0;e<t.length;e++)$.extend(this.productSingleObject.variants[e],t[e])},_initVariants:function(){var t={$container:this.$container,enableHistoryState:this.settings.enableHistoryState,product:this.productSingleObject,singleOptionSelector:this.selectors.singleOptionSelector,originalSelectorId:this.selectors.originalSelectorId};this.variants=new slate.Variants(t),this.$container.on("variantChange"+this.settings.namespace,this._updateAddToCartBtn.bind(this)),this.$container.on("variantPriceChange"+this.settings.namespace,this._updatePrice.bind(this)),this.$container.on("variantSKUChange"+this.settings.namespace,this._updateSKU.bind(this)),this.$container.on("variantImageChange"+this.settings.namespace,this._updateImages.bind(this))},_updateAddToCartBtn:function(t){var e=t.variant,i={$stock:$(this.selectors.productStock),$addToCart:$(this.selectors.addToCart),$addToCartText:$(this.selectors.addToCartText)};e?e.available?(i.$addToCart.removeClass("btn--sold-out").prop("disabled",!1),i.$addToCartText.html(theme.strings.addToCart),this.settings.stockSetting&&(e.inventory_management?e.inventory_quantity<10&&e.inventory_quantity>0?i.$stock.html(theme.strings.stockAvailable.replace("1",e.inventory_quantity)).removeClass("hide"):e.inventory_quantity<=0&&e.incoming?i.$stock.html(theme.strings.willNotShipUntil.replace("[date]",e.next_incoming_date)).removeClass("hide"):i.$stock.addClass("hide"):i.$stock.addClass("hide"))):(i.$addToCart.prop("disabled",!0).addClass("btn--sold-out"),i.$addToCartText.html(theme.strings.soldOut),this.settings.stockSetting&&(e.incoming?i.$stock.html(theme.strings.willBeInStockAfter.replace("[date]",e.next_incoming_date)).removeClass("hide"):i.$stock.addClass("hide"))):(i.$addToCart.prop("disabled",!0).removeClass("btn--sold-out"),i.$addToCartText.html(theme.strings.unavailable),this.settings.stockSetting&&i.$stock.addClass("hide"))},_updatePrice:function(t){var e=t.variant;e?($(this.selectors.productPrice).html(theme.Currency.formatMoney(e.price,theme.moneyFormat)),e.compare_at_price>e.price?($(this.selectors.comparePrice).html(theme.Currency.formatMoney(e.compare_at_price,theme.moneyFormat)).removeClass("hide"),$(this.selectors.saleTag).removeClass("hide")):($(this.selectors.comparePrice).addClass("hide"),$(this.selectors.saleTag).addClass("hide"))):$(this.selectors.comparePrice).addClass("hide")},_updateSKU:function(t){var e=t.variant;e&&$(this.selectors.SKU).html(e.sku)},_updateImages:function(t){var e=t.variant;if(e&&e.featured_image){var i=theme.Images.getSizedImageUrl(e.featured_image.src,this.settings.imageSize),s=theme.Images.getSizedImageUrl(e.featured_image.src,"1024x1024");this.switchProductImage(i,s),this.setActiveThumbnail()}},switchProductImage:function(t,e){$(this.selectors.productFeaturedImage).attr("src",t),$(this.selectors.productImageWrap).attr("href",e)},setActiveThumbnail:function(t){var e=$(this.selectors.productThumbs);if(void 0===t){var i=$(this.selectors.productFeaturedImage).attr("src");t=$('.product-single__thumbnail[href="'+i+'"]')}if(e.find(".product-single__thumbnail-item").removeClass("is-active"),t.parent().addClass("is-active"),e.hasClass("slick-initialized")){var s=e.slick("slickCurrentSlide"),o=t.parent().attr("data-slick-index");s!==o&&e.slick("slickGoTo",o,!1)}},_productZoomImage:function(){if($(this.selectors.productFeaturedImage).length){var t=this;$(this.selectors.productImageWrap).on("click"+this.settings.namespace,function(e){e.preventDefault(),$(t.selectors.productZoomImage).attr("src","").attr("src",$(this).attr("href"))}),this.ProductModal=new window.Modals(this.selectors.modal,"product-modal"),this.ProductModal.$modal.on("click"+this.settings.namespace,function(e){"IMG"!==e.target.nodeName&&t.ProductModal.close()})}},_productThumbSwitch:function(){if($(this.selectors.productThumbs).length){var t=this;$(this.selectors.productThumbImages).on("click"+this.settings.namespace,function(e){e.preventDefault();var i=$(this),s=i.attr("href"),o=i.attr("data-zoom");t.setActiveThumbnail(i),t.switchProductImage(s,o)})}},_productThumbnailSlider:function(){var t=$(this.selectors.productThumbs);if(t.length&&t.find(this.selectors.productThumbAllImages).length>2){t.on("init"+this.settings.namespace,this._productSwipeInit.bind(this));var e,i,s=window.sliderArrows||!1;s&&(e='<button type="button" class="slick-next"><span class="medium-up--hide">'+s.right+'</span><span class="small--hide">'+s.down+"</span></button>",i='<button type="button" class="slick-prev"><span class="medium-up--hide">'+s.left+'</span><span class="small--hide">'+s.up+"</span></button>"),t.slick({accessibility:!1,arrows:!0,dots:!1,infinite:!1,autoplay:!1,slidesToShow:3,slidesToScroll:3,vertical:!0,verticalSwiping:!0,nextArrow:e,prevArrow:i,responsive:[{breakpoint:this.settings.smallBreakpoint,settings:{vertical:!1,verticalSwiping:!1}}]}),t.slick("slickGoTo",t.find(".is-active").attr("data-slick-index"),!0)}},_productSwipeInit:function(t,e){this.settings.productThumbIndex=e.currentSlide,this.settings.productThumbMax=e.slideCount-1,$(this.selectors.productFeaturedImage).on("swipeleft swiperight",function(t){"swipeleft"===t.type&&this._goToNextThumbnail(),"swiperight"===t.type&&this._goToPrevThumbnail(),$('.product-single__thumbnail-item[data-slick-index="'+this.settings.productThumbIndex+'"]').find(".product-single__thumbnail").trigger("click")})},_goToNextThumbnail:function(){this.settings.productThumbIndex++,this.settings.productThumbIndex>this.settings.productThumbMax&&(this.settings.productThumbIndex=0),$(this.selectors.productThumbs).slick("slickGoTo",this.settings.productThumbIndex,!0)},_goToPrevThumbnail:function(){this.settings.productThumbIndex--,this.settings.productThumbIndex<0&&(this.settings.productThumbIndex=this.settings.productThumbMax),$(this.selectors.productThumbs).slick("slickGoTo",this.settings.productThumbIndex,!0)},_initQtySelector:function(){this.$container.find(".product-form__quantity").each(function(t,e){new QtySelector($(e))})},onUnload:function(){$(this.selectors.productImageWrap).off(this.settings.namespace),$(this.selectors.productThumbImages).off(this.settings.namespace),$(this.selectors.productThumbs).slick("unslick"),this.ProductModal.$modal.off(this.settings.namespace)}}),t}(),theme.Slideshow=function(){function t(){this.slideshow=new theme.Hero}return t.prototype=_.assignIn({},t.prototype,{onUnload:function(){this.slideshow.destroy()},onSelect:function(){this.slideshow.pause()},onDeselect:function(){this.slideshow.play()},onBlockSelect:function(t){var e=$(".hero__slide--"+t.detail.blockId+":not(.slick-cloned)").data("slick-index");this.slideshow.pause(),this.slideshow.goToSlide(e)},onBlockDeselect:function(){this.slideshow.play()}}),t}(),theme.Cart=function(){function t(t){var e=this.$container=$(t),i=e.attr("data-section-id");theme.cartObject=JSON.parse($("#CartJson-"+i).html()),this.init(e)}var e={cartNote:"#CartSpecialInstructions",cartQtyInput:".cart__quantity",cartNoCookiesClass:"cart--no-cookies"};return t.prototype=_.assignIn({},t.prototype,{init:function(t){this._initQtySelector(),this._initCartNote(),this._cookiesEnabled()||t.addClass(e.cartNoCookiesClass)},_initQtySelector:function(){$(e.cartQtyInput).each(function(t,e){new QtySelector($(e))})},_initCartNote:function(){if($(e.cartNote).length){var t,i,s=$(e.cartNote),o=s[0].offsetHeight-s[0].clientHeight;s.on("keyup input",function(){$(this).css("height","auto").css("height",s[0].scrollHeight+o)}),s.on("change",$.proxy(function(){t=s.val(),i={type:"POST",url:"/cart/update.js",data:"note="+this._attributeToString(t),dataType:"json"},$.ajax(i)},this))}},_attributeToString:function(t){return"string"!=typeof t&&"undefined"===(t=String(t))&&(t=""),$.trim(t)},_cookiesEnabled:function(){var t=navigator.cookieEnabled;return t||(document.cookie="testcookie",t=-1!==document.cookie.indexOf("testcookie")),t}}),t}(),theme.Quotes=function(){function t(t){this.$container=$(t).on("init",this._a11y.bind(this)),this.$container.slick({accessibility:!0,arrows:!1,dots:!0,draggable:!0,autoplay:!1})}return t.prototype=_.assignIn({},t.prototype,{_a11y:function(t,e){var i=e.$list,s=this.$container.parent();i.removeAttr("aria-live"),s.on("focusin",function(t){s.has(t.target).length&&i.attr("aria-live","polite")}),s.on("focusout",function(t){s.has(t.target).length&&i.removeAttr("aria-live")})},_goToSlide:function(t){this.$container.slick("slickGoTo",t)},onUnload:function(){delete this.$container},onBlockSelect:function(t){var e=$(".quote__slide-wrapper--"+t.detail.blockId+":not(.slick-cloned)").data("slick-index");this._goToSlide(e)}}),t}(),theme.Video=function(){function t(t){this.$container=$(t);var e=this.$container.attr("data-section-id");this.namespace="."+e,this.onLoad()}var e,i,s={promiseAPI:function(){if(!e){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),e=$.Deferred(function(t){window.onYouTubeIframeAPIReady=t.resolve,setTimeout(function(){t.reject("Request for YouTube API timed out after 30 seconds.")},3e4)})}return e},promisePlayer:function(t,e){return this.promiseAPI().then(function(){return $.Deferred(function(i){void 0===window.YT&&i.reject("We're sorry, something went wrong. The YouTube API has not loaded correctly.");var s=new YT.Player(t,e);s.addEventListener("onReady",function(){i.resolve(s)}),setTimeout(function(){i.reject("Request for YouTube player has timed out after 30 seconds.")},3e4)})})}},o={promiseAPI:function(){return i||(i=$.Deferred(function(t){var e=document.createElement("script");e.src="https://player.vimeo.com/api/player.js",e.onload=e.onreadystatechange=function(){this.readyState&&"complete"!==this.readyState||t.resolve()};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i),setTimeout(function(){t.reject("Request for Vimeo API timed out after 30 seconds.")},3e4)})),i},promisePlayer:function(t,e){return this.promiseAPI().then(function(){return $.Deferred(function(i){void 0===window.Vimeo&&i.reject("We're sorry, something went wrong. The Vimeo API has not loaded correctly.");var s=new window.Vimeo.Player(t,e);setTimeout(function(){i.reject("Request for Vimeo player has timed out after 30 seconds.")},3e4),s.ready().then(function(){i.resolve(s)})})})}},n={loadPlayerButton:".video-section__load-player-button",closePlayerButton:".video-section__player-close",playerContainer:".video-section__player",cover:".video-section__cover",errorMessage:".video-section__error",bodyOverlay:".video-section__body-overlay",body:"body"},a={playerLoading:"video-section--loading",playerLoaded:"video-section--loaded",playerError:"video-section--error",videoPlaying:"video-playing"};return t.prototype=_.assignIn({},t.prototype,{onLoad:function(){this.$container.on("click",n.loadPlayerButton,this._loadPlayer.bind(this)).on("click",n.closePlayerButton,this._closePlayer.bind(this)).on("click",n.bodyOverlay,this._closePlayer.bind(this))},_loadPlayer:function(){var t,e=this.$container,i=($(n.loadPlayerButton,e),$(n.playerContainer,e)),s=this.$container.attr("data-video-type");return"youtube"===s?t=this._loadYoutubePlayer(i[0]):"vimeo"===s&&(t=this._loadVimeoPlayer(i[0])),t.then(this._onPlayerLoadReady.bind(this)).fail(this._onPlayerLoadError.bind(this))},_loadYoutubePlayer:function(t){return s.promisePlayer(t,{videoId:this.$container.attr("data-video-id"),ratio:16/9,playerVars:{modestbranding:1,autoplay:1,showinfo:0,rel:0}}).then(function(t){this.player=t}.bind(this))},_loadVimeoPlayer:function(t){return o.promisePlayer(t,{id:this.$container.attr("data-video-id")}).then(function(t){this.player=t,this.player.play()}.bind(this))},_onPlayerLoadReady:function(){$(n.closePlayerButton,this.$container).show().focus(),$(n.cover,this.$container).addClass(a.playerLoaded),this.$container.addClass(a.playerLoaded),this._setScrollPositionValues(),$(n.body).addClass(a.videoPlaying),$(document).on("keyup"+this.namespace,this._closeOnEscape.bind(this)),$(window).on("resize"+this.namespace,this._setScrollPositionValues.bind(this)),slate.a11y.trapFocus({$container:this.$container,namespace:this.namespace})},_onPlayerLoadError:function(t){this.$container.addClass(a.playerError),$(n.errorMessage,this.$container).text(t)},_closeOnEscape:function(t){27===t.keyCode&&(this._closePlayer(),$(n.loadPlayerButton,this.$container).focus())},_onScroll:function(){var t=$(window).scrollTop();(t>this.videoTop+.25*this.videoHeight||t+this.windowHeight<this.videoBottom-.25*this.videoHeight)&&requestAnimationFrame(this._closePlayer.bind(this))},_setScrollPositionValues:function(){this.videoHeight=this.$container.outerHeight(!0),this.videoTop=this.$container.offset().top,this.videoBottom=this.videoTop+this.videoHeight,this.windowHeight=$(window).innerHeight()},_closePlayer:function(){$(n.body).removeClass(a.videoPlaying),$(n.cover,this.$container).removeClass(a.playerLoaded),this.$container.removeClass(a.playerLoaded),$(n.closePlayerButton,this.$container).hide(),slate.a11y.removeTrapFocus({$container:this.$container,namespace:this.namespace}),"function"==typeof this.player.destroy?this.player.destroy():"function"==typeof this.player.unload&&this.player.unload(),$(document).off(this.namespace),$(window).off(this.namespace)}}),t}(),theme.init=function(){theme.customerTemplates.init(),slate.rte.wrapTable(),slate.rte.iframeReset(),slate.a11y.pageLinkFocus($(window.location.hash)),$(".in-page-link").on("click",function(t){slate.a11y.pageLinkFocus($(t.currentTarget.hash))}),$('a[href="#"]').on("click",function(t){t.preventDefault()});var t=new theme.Sections;t.register("header",theme.HeaderSection),t.register("product",theme.Product),t.register("collection-filters",theme.Filters),t.register("map",theme.Maps),t.register("slideshow",theme.Slideshow),t.register("cart",theme.Cart),t.register("quotes",theme.Quotes),t.register("video",theme.Video),$(window).on("load",theme.articleImages),theme.passwordModalInit()},theme.articleImages=function(){var t=$(".rte--indented-images");t.length&&t.find("img").each(function(e,i){var s=$(i),o=s.attr("style");o&&"float: none;"!==o||s.width()>=t.width()&&s.parent("p").addClass("rte__image-indent")})},theme.passwordModalInit=function(){var t=$("#LoginModal");t.length&&(theme.PasswordModal=new window.Modals("LoginModal","login-modal",{focusOnOpen:"#Password"}),t.find(".errors").length&&theme.PasswordModal.open())},$(theme.init);